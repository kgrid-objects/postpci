{"metadata":{"title":"Ischemic Bleeding Risk post Percutaneous Coronary Intervention  Calculator","arkId":"ark:/67034/k47c7m","version":"v0.1.0","owner":"KGRID","description":"This object is derived from the DAPT study that aimed to identify the risk of benefit vs. harm for patients that continue thienopyridine treatment beyond one year after percutaneous coronary intervention (PCI). This object's input is a dictionary containing risk values for five different factors. It will then calculate the estimated risk of GUSTO moderate or severe bleeding in the 12 to 30 month period post PCI using the formula from the study","contributors":"Andrew Cullen","keywords":"GUSTO, bleeding, PCI","published":true,"lastModified":1507733394835,"createdOn":1477602646124,"objectType":null,"citations":[{"citation_id":null,"citation_title":"Development and Validation of a Prediction Rule for Benefit and Harm of Dual Antiplatelet Therapy","citation_at":"https://www.ncbi.nlm.nih.gov/pubmed/27022822"},{"citation_id":"051ac538-52d5-487f-9259-1b8fcfbaf3e4","citation_title":"Development and Validation of a Prediction Rule for Benefit and Harm of Dual Antiplatelet Therapy","citation_at":"https://www.ncbi.nlm.nih.gov/pubmed/27022822"},{"citation_id":"7ed01398-13ae-466e-b523-59cd7d6382cf","citation_title":"Development and Validation of a Prediction Rule for Benefit and Harm of Dual Antiplatelet Therapy","citation_at":"https://www.ncbi.nlm.nih.gov/pubmed/27022822"},{"citation_id":"79f998f7-0677-459a-9c61-7eb9d7c09592","citation_title":"Development and Validation of a Prediction Rule for Benefit and Harm of Dual Antiplatelet Therapy","citation_at":"https://www.ncbi.nlm.nih.gov/pubmed/27022822"},{"citation_id":"ec2a6b53-4593-4e58-8215-c583317f3bb3","citation_title":"Development and Validation of a Prediction Rule for Benefit and Harm of Dual Antiplatelet Therapy","citation_at":"https://www.ncbi.nlm.nih.gov/pubmed/27022822"},{"citation_id":"36ae4072-ac94-48a3-b019-71ff12dd5afc","citation_title":"Development and Validation of a Prediction Rule for Benefit and Harm of Dual Antiplatelet Therapy","citation_at":"https://www.ncbi.nlm.nih.gov/pubmed/27022822"},{"citation_id":"8c057ca1-1b7e-4a68-961d-e4968a2ec038","citation_title":"Development and Validation of a Prediction Rule for Benefit and Harm of Dual Antiplatelet Therapy","citation_at":"https://www.ncbi.nlm.nih.gov/pubmed/27022822"}],"license":{"licenseName":"MIT License","licenseLink":"https://opensource.org/licenses/MIT"}},"inputMessage":"<rdf:RDF xmlns:ot=\"http://uofm.org/objectteller/#\"\r\n xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"> \r\n  <rdf:Description rdf:about=\"http://uofm.org/objectteller/inputMessage\"> \r\n    <ot:noofparams>5</ot:noofparams>\r\n    <ot:params>\r\n      <rdf:Seq>\r\n      <rdf:li>DAPT</rdf:li>\r\n      <rdf:li>age</rdf:li>\r\n      <rdf:li>periphDisease</rdf:li>\r\n      <rdf:li>hypertension</rdf:li>\r\n      <rdf:li>renal</rdf:li>\r\n    </rdf:Seq>\r\n   </ot:params>\r\n  </rdf:Description>\r\n  <rdf:Description rdf:about=\"http://uofm.org/objectteller/DAPT/\">\r\n    <ot:datatype>INT</ot:datatype>\r\n    <ot:min>0</ot:min>\r\n    <ot:max>1</ot:max>\r\n  </rdf:Description>\r\n  <rdf:Description rdf:about=\"http://uofm.org/objectteller/age/\">\r\n    <ot:datatype>INT</ot:datatype>\r\n    <ot:min>30</ot:min>\r\n  </rdf:Description>\r\n  <rdf:Description rdf:about=\"http://uofm.org/objectteller/periphDisease/\">\r\n    <ot:datatype>INT</ot:datatype>\r\n    <ot:min>0</ot:min>\r\n    <ot:max>1</ot:max>\r\n  </rdf:Description> \r\n  <rdf:Description rdf:about=\"http://uofm.org/objectteller/hypertension/\">\r\n    <ot:datatype>INT</ot:datatype>       \r\n    <ot:min>0</ot:min>      \r\n    <ot:max>1</ot:max>   \r\n  </rdf:Description>       \r\n  <rdf:Description rdf:about=\"http://uofm.org/objectteller/renal/\">    \r\n    <ot:datatype>INT</ot:datatype>      \r\n    <ot:min>0</ot:min>     \r\n    <ot:max>1</ot:max>   \r\n  </rdf:Description>\r\n</rdf:RDF>","outputMessage":"<rdf:RDF xmlns:ot=\"http://uofm.org/objectteller/\"  \r\n  xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\">\r\n  <rdf:Description rdf:about=\"http://uofm.org/objectteller/outputMessage\">\r\n   <ot:returntype>FLOAT</ot:returntype>\r\n  </rdf:Description>\r\n </rdf:RDF>","payload":{"content":"from math import exp\nimport math\n\n\ndef getBleedingRisk(riskValues):\n\n\tDAPTkey = 'DAPT'\n\tageKey = 'age'\n\tperiphKey = 'periphDisease'\n\thypertensionKey = 'hypertension'\n\trenalKey = 'renal'\n\n\t#pre-determined keys for riskValues dictionary that map to risk factor values\n\tkeys = [DAPTkey, ageKey, periphKey, hypertensionKey, renalKey]\n\n\t#Cox regression coefficients\n\tregressions = {DAPTkey: 0.506, ageKey: 0.043, periphKey: 0.769, hypertensionKey: 0.374, renalKey: 0.509}\n\t#error handling\n\tif len(riskValues) != len(regressions):\n\t\traise BaseException(\\\"list is too long\\\")\n\t#except lengthError:\n\t#\tprint lengthError.message\n\t#\treturn -1\n\n\t#Kaplan-Meier base rate of freedom\n\tS18 = .9809\n\t#estimated from DAPT study\n\tmeanCoefficientSum = 3.23\n\n\tindividualCoefficientSum = 0\n\n\tfor key in keys:\n\t\t#print \\\"doing {} + {}\\\".format(individualCoefficientSum, riskValues[key] * regressions[key])\n\t\tindividualCoefficientSum = individualCoefficientSum + (riskValues[key] * regressions[key])\n\n\t#print 'x: {}'.format(individualCoefficientSum - meanCoefficientSum)\n\texponent = exp(individualCoefficientSum - meanCoefficientSum)\n\t#print 'exponent %f' % exponent\n\n\treturn 1 - pow(S18, exponent)\n\n\ndef test_function():\n\n\ttest_inputs =  [\n\t\t\t\t\t\t{'DAPT': 1, 'age': 60, 'periphDisease': 0, 'hypertension': 1, 'renal': 0},\n\t\t\t\t\t\t{'DAPT': 0, 'age': 0, 'periphDisease': 0, 'hypertension': 0, 'renal': 0},\n\t\t\t\t\t\t{'DAPT': 1, 'age': 1, 'periphDisease': 1, 'hypertension': 1, 'renal': 1},\n\t\t\t\t\t\t{'DAPT': 1, 'age': 37, 'periphDisease': 0, 'hypertension': 0, 'renal': 1},\n\t\t\t\t\t\t{'DAPT': 1, 'age': 3, 'periphDisease': 1, 'hypertension': 1, 'renal': 1},\n\t\t\t\t\t\t{'DAPT': 1, 'age': 68, 'periphDisease': 1, 'hypertension': 1, 'renal': 1},\n\t\t\t\t\t\t{'DAPT': 1, 'age': 80, 'periphDisease': 1, 'hypertension': 1, 'renal': 1}\n\n\t\t\t\t\t]\n\n\tcorrectOutputs = [.024, .00076, .00687, .01028, 0.00744, .11564, 0.18607]\n\n\tcorrectOutputIndex = 0\n\n\tfor test_in in test_inputs:\n\t\tresult = getBleedingRisk(test_in)\n\t\tprint 'result: {}'.format(result)\n\t\tprint 'correct: {}'.format(correctOutputs[correctOutputIndex])\n\t\tassert (result > (correctOutputs[correctOutputIndex]- 0.001) and result < (correctOutputs[correctOutputIndex] + 0.001))\n\t\tcorrectOutputIndex += 1\n\ndef main():\n\ttest_function()\n\nif __name__ == \\\"__main__\\\":\n\tmain()\n","functionName":"getBleedingRisk","engineType":"Python"},"logData":"ProvenanceLogData: \n\t wasAttributedTo: 'null',\n\t wasGeneratedBy: 'null',\n\t wasAssociatedWith: 'Andrew Q. Cullen',\n\t used: 'null',\n\t startedAtTime: null,\n\t endedAtTime: null","uri":"ark:/67034/k47c7m"}