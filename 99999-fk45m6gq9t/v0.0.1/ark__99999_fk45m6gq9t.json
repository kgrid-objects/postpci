{"metadata":{"title":"Stent Thrombosis Risk Calculator","arkId":"ark:/99999/fk45m6gq9t","version":"v0.1.0","owner":"KGRID","description":"This object is derived from the DAPT study that aimed to identify the risk of benefit vs. harm for patients that continue thienopyridine treatment beyond one year after percutaneous coronary intervention (PCI). This object's input is a dictionary containing risk values for 12 different risk factors. It will then calculate the estimated risk of MI/stent thrombosis in the 12-30 month period post PCI using the following formula: RISK = 1 - S(18)^exp(sum of [coefficient * risk factor values] - sum","contributors":"Andrew Cullen","keywords":"cardiac-advisor","published":"yes","lastModified":1507923801567,"createdOn":1478643789806,"objectType":null,"citations":[{"citation_id":null,"citation_title":"Development and Validation of a Prediction Rule for Benefit and Harm of Dual Antiplatelet Therapy Beyond 1 Year After Percutaneous Coronary ","citation_at":"https://www.ncbi.nlm.nih.gov/pubmed/27022822"},{"citation_id":"040fa093-e49f-48b4-9d7a-5847af5bfb86","citation_title":"Development and Validation of a Prediction Rule for Benefit and Harm of Dual Antiplatelet Therapy Beyond 1 Year After Percutaneous Coronary ","citation_at":"https://www.ncbi.nlm.nih.gov/pubmed/27022822"}],"license":{"licenseName":"","licenseLink":""}},"inputMessage":"<rdf:RDF xmlns:ot=\"http://uofm.org/objectteller/#\"\n         xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\">\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/inputMessage\">\n        <ot:noofparams>12</ot:noofparams>\n        <ot:params>\n            <rdf:Seq>\n                <rdf:li>DAPT</rdf:li>\n                <rdf:li>infar</rdf:li>\n                <rdf:li>priorPCI</rdf:li>\n                <rdf:li>CHF</rdf:li>\n                <rdf:li>veinGraft</rdf:li>\n                <rdf:li>stentDiameter</rdf:li>\n                <rdf:li>pac</rdf:li>\n                <rdf:li>cigSmoker</rdf:li>\n                <rdf:li>diabetes</rdf:li>\n                <rdf:li>periphDisease</rdf:li>\n                <rdf:li>hypertension</rdf:li>\n                <rdf:li>renal</rdf:li>\n            </rdf:Seq>\n        </ot:params>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/DAPT/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n      <rdf:Description rdf:about=\"http://uofm.org/objectteller/infar/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n      <rdf:Description rdf:about=\"http://uofm.org/objectteller/priorPCI/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n      <rdf:Description rdf:about=\"http://uofm.org/objectteller/CHF/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n      <rdf:Description rdf:about=\"http://uofm.org/objectteller/veinGraft/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n      <rdf:Description rdf:about=\"http://uofm.org/objectteller/stentDiameter/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n      <rdf:Description rdf:about=\"http://uofm.org/objectteller/pac/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n      <rdf:Description rdf:about=\"http://uofm.org/objectteller/cigSmoker/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n      <rdf:Description rdf:about=\"http://uofm.org/objectteller/diabetes/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/periphDisease/\">\n\t    <ot:datatype>INT</ot:datatype>\n\t    <ot:min>0</ot:min>\n\t    <ot:max>1</ot:max>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/hypertension/\">\n\t    <ot:datatype>INT</ot:datatype>\n\t    <ot:min>0</ot:min>\n\t    <ot:max>1</ot:max>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/renal/\">\n\t    <ot:datatype>INT</ot:datatype>\n\t    <ot:min>0</ot:min>\n\t    <ot:max>1</ot:max>\n    </rdf:Description>\n</rdf:RDF>\n","outputMessage":"<rdf:RDF xmlns:ot=\"http://uofm.org/objectteller/\"\n  xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\">\n  <rdf:Description rdf:about=\"http://uofm.org/objectteller/outputMessage\">\n    <ot:returntype>FLOAT</ot:returntype>\n  </rdf:Description>\n</rdf:RDF>","payload":{"content":"from math import exp\nimport math\n\ndef getIschemicRisk(riskValues):\n\n\tDAPTkey = 'DAPT'\n\tinfarKey = 'infar'\n\tpriorPCIkey = 'priorPCI'\n\tCHFhistKey = 'CHF'\n\tveinGraftKey = 'veinGraft'\n\tstentDiameterKey = 'stentDiameter'\n\tpacKey = 'pac'\n\tcigKey = 'cigSmoker'\n\tdiabetesKey = 'diabetes'\n\tperiphKey = 'periphDisease'\n\thypertensionKey = 'hypertension'\n\trenalKey = 'renal'\n\n\tkeys = [DAPTkey, infarKey, priorPCIkey, CHFhistKey, veinGraftKey, stentDiameterKey, \n\t\t\tpacKey, cigKey, diabetesKey, periphKey, hypertensionKey, renalKey]\n\n\t#Cox regression coefficients\n\tregressions = {DAPTkey: -0.653, infarKey: 0.499, priorPCIkey: 0.58, CHFhistKey: 0.633, veinGraftKey: 0.562, \n\t\t\t\t\tstentDiameterKey: 0.475, pacKey: 0.454, cigKey: 0.333, diabetesKey: 0.320, periphKey: 0.401,\n\t\t\t\t\t hypertensionKey: 0.315, renalKey: 0.435}\n\n\t#Kaplan-Meier base rate of freedom\n\tS18 = 0.9691 \n\t#this sum is estimated from the DAPT study\n\tmeanCoefficientSum = 0.79\n\n\tindividualCoefficientSum = 0\n\t\n\t#summation\n\tfor key in keys:\n\t\t#print 'riskvalues[{}]: {}'.format(i, riskValues[i])\n\t\t#print 'doing {} + {}'.format(individualCoefficientSum, riskValues[i] * regressions[i])\n\t\tindividualCoefficientSum = individualCoefficientSum + (riskValues[key] * regressions[key])\n\n\t#print 'indivco: {}'.format(individualCoefficientSum)\n\n\n\n\texponent = exp(individualCoefficientSum - meanCoefficientSum)\n\t#print 'exponent: {}'.format(exponent)\n\n\treturn 1 - pow(S18, exponent)\n\n\ndef test_function():\n\n\tDAPTkey = 'DAPT'\n\tinfarKey = 'infar'\n\tpriorPCIkey = 'priorPCI'\n\tCHFhistKey = 'CHF'\n\tveinGraftKey = 'veinGraft'\n\tstentDiameterKey = 'stentDiameter'\n\tpacKey = 'pac'\n\tcigKey = 'cigSmoker'\n\tdiabetesKey = 'diabetes'\n\tperiphKey = 'periphDisease'\n\thypertensionKey = 'hypertension'\n\trenalKey = 'renal'\n\n\ttest_inputs = [\n\t\t\t\t\t\t{'DAPT': 1, 'infar': 0, 'priorPCI': 0, 'CHF': 0, 'veinGraft': 0, 'stentDiameter': 1, 'pac': 1, 'cigSmoker': 1,\n\t\t\t\t\t\t'diabetes': 0, 'periphDisease': 0, 'hypertension': 1, 'renal': 0},\n\n\t\t\t\t\t\t{'DAPT': 0, 'infar': 0, 'priorPCI': 0, 'CHF': 0, 'veinGraft': 0, 'stentDiameter': 0, 'pac': 0, 'cigSmoker': 0,\n\t\t\t\t\t\t'diabetes': 0, 'periphDisease': 0, 'hypertension': 0, 'renal': 0},\n\n\t\t\t\t\t\t{'DAPT': 1, 'infar': 1, 'priorPCI': 1, 'CHF': 1, 'veinGraft': 1, 'stentDiameter': 1, 'pac': 1, 'cigSmoker': 1,\n\t\t\t\t\t\t'diabetes': 1, 'periphDisease': 1, 'hypertension': 1, 'renal': 1},\n\n\t\t\t\t\t\t{'DAPT': 1, 'infar': 1, 'priorPCI': 1, 'CHF': 1, 'veinGraft': 1, 'stentDiameter': 1, 'pac': 0, 'cigSmoker': 0,\n\t\t\t\t\t\t'diabetes': 0, 'periphDisease': 0, 'hypertension': 0, 'renal': 0},\n\n\t\t\t\t\t\t{'DAPT': 1, 'infar': 0, 'priorPCI': 0, 'CHF': 0, 'veinGraft': 0, 'stentDiameter': 0, 'pac': 0, 'cigSmoker': 0,\n\t\t\t\t\t\t'diabetes': 0, 'periphDisease': 0, 'hypertension': 0, 'renal': 0}\n\t\t\t\t   ]\n\n\tcorrectOutputs =\t[0.035251864828, 0.01414406, 0.66982, 0.1094, 0.00739]\n\tcorrectOutputIndex = 0\n\n\tfor test_in in test_inputs:\n\t\tresult = getIschemicRisk(test_in)\n\t\tprint 'result: {}'.format(result)\n\t\tprint 'correct: {}'.format(correctOutputs[correctOutputIndex])\n\t\tassert (result > (correctOutputs[correctOutputIndex]- 0.001) and result < (correctOutputs[correctOutputIndex] + 0.001))\n\t\tcorrectOutputIndex += 1\n\n","functionName":"getIschemicRisk","engineType":"Python"},"logData":"ProvenanceLogData: \n\t wasAttributedTo: 'null',\n\t wasGeneratedBy: 'null',\n\t wasAssociatedWith: 'Andrew Cullen',\n\t used: 'null',\n\t startedAtTime: Tue Nov 08 17:23:09 EST 2016,\n\t endedAtTime: Tue Nov 08 17:23:09 EST 2016","uri":"ark:/99999/fk45m6gq9t"}